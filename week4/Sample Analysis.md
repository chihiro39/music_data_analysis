# 🎯 项目报告：南瓜价格预测模型分析（随机森林）

## 📌 实验概况
- **模型**：RandomForestRegressor（100 棵树）
- **特征编码**：OneHotEncoder（对 Package、City Name、Variety 编码）
- **目标变量**：Package Price
- **训练集/测试集比例**：80% / 20%
- **实验结果**：
  - 均方根误差（RMSE）：**29.8293**
  - 决定系数（R²）：**0.8884** —— 表现优秀，说明大部分样本被很好拟合。

---

## ✅ 预测最准确的样本分析（误差为 0）

| 序号 | 月份 | 真实价格 | 预测价格 | 误差 | 分析 |
|------|------|----------|----------|------|------|
| 543  | 10月 | 16.50    | 16.50    | 0.00 | 属于典型值，10 月份数据可能在训练集中频繁出现，特征分布稳定。 |
| 987  | 10月 | 200.00   | 200.00   | 0.00 | 同样为 10 月，可能属于常见大包装高价品种，模型已充分学习。 |

🔍 **观察**：两个准确样本都来自 10 月份，说明模型在该月份预测表现稳定，数据量可能较多或特征更具代表性。

---

## ❌ 预测误差最大的样本分析

| 序号 | 月份 | 真实价格 | 预测价格 | 误差 | 分析 |
|------|------|----------|----------|------|------|
| 1105 | 9月  | 250.00   | 0.30     | 249.70 | 极端高价样本，可能在训练集中无类似分布，模型难以拟合。 |
| 1112 | 9月  | 250.00   | 3.09     | 246.91 | 同样情况，可能是边缘值或某些稀有城市/品种导致模型偏离。 |

⚠️ **潜在原因**：
- 极端值未被足够学习，训练集中缺乏类似样本；
- OneHot 特征稀疏性较高，可能造成模型泛化能力下降；
- 城市或品种分布不均衡，9 月的数据可能偏少或异常。

---

## 🧠 模型改进建议

| 问题 | 建议 |
|------|------|
| 极端价格预测不准 | 考虑对价格进行 `log(价格)` 转换，压缩极端值影响 |
| 特征稀疏 | 可引入 Embedding 或使用 Target Encoding 替代 OneHot |
| 时间特征较弱 | 增加 `季度`、`年份` 等高层时间维度特征 |
| 类别数据不平衡 | 对城市、品种等类别按出现频次加权训练或采样 |